# â˜€ï¸ Helios AI: Smart Dual-Axis Solar Tracker with Data History

Helios AI æ˜¯ä¸€æ¬¾åŸºäº **äººå·¥æ™ºèƒ½ (Gemini)** å’Œ **ç‰©è”ç½‘ (ESP32)** çš„åŒè½´å¤ªé˜³èƒ½è‡ªåŠ¨è¿½è¸ªç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿä¸ä»…èƒ½æ ¹æ®å…‰æ•ç”µé˜»è¿½å…‰ï¼Œè¿˜èƒ½ç»“åˆ**é©¬æ¥è¥¿äºšå®æ—¶å¤©æ°”é¢„æŠ¥**ä¸**ä¼ æ„Ÿå™¨å®‰å…¨æ£€æµ‹**åšå‡ºæœ€ä¼˜å†³ç­–ï¼Œå¹¶å°†æ‰€æœ‰å†³ç­–è¿‡ç¨‹æ°¸ä¹…å­˜æ¡£ã€‚

## ğŸš€ æœ€æ–°æ›´æ–°ï¼šè‡ªåŠ¨å†å²è®°å½•åŠŸèƒ½ (Data History Logging)
æˆ‘ä»¬ç°åœ¨å®ç°äº† **â€œç³»ç»Ÿè®°å¿†â€** æ¨¡å—ã€‚ç³»ç»Ÿæ¯éš” 60 ç§’ä¼šå°†å½“å‰çš„ï¼š
- ğŸ“ **å®æ—¶æ°”è±¡æè¿°** (OpenWeatherMap API)
- â˜ï¸ **äº‘å±‚è¦†ç›–ç‡ %**
- ğŸ¤– **Gemini AI çš„å†³ç­–æŒ‡ä»¤** (æ°´å¹³ä¸å‚ç›´è§’åº¦)
- ğŸ“¡ **ç¡¬ä»¶ä¼ æ„Ÿå™¨å¿«ç…§** (æ¹¿åº¦ä¸é™é›¨çŠ¶æ€)

è‡ªåŠ¨å­˜å…¥ Firebase çš„ `/history` èŠ‚ç‚¹ã€‚è¿™ä¸ºåç»­çš„**èƒ½æºé‡‡é›†æ•ˆç‡åˆ†æ**å’Œ**å¤§æ•°æ®å¯è§†åŒ–**æä¾›äº†åŸºç¡€ã€‚

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½ (Key Features)

- **AI æ™ºèƒ½å†³ç­–**: æ¥å…¥ Google Gemini 2.0 Flashï¼Œå®æ—¶å¹³è¡¡ API å¤©æ°”æ•°æ®ä¸æœ¬åœ°ç¡¬ä»¶ä¼ æ„Ÿå™¨ã€‚
- **æ°”è±¡æ„Ÿåº”**: å®æ—¶ç›‘æ§ Johor Bahru çš„äº‘é‡ã€‚
- **æ··åˆå®‰å…¨åè®®**: å½“æœ¬åœ°é›¨æ»´ä¼ æ„Ÿå™¨æ£€æµ‹åˆ°é™é›¨æˆ–æ¹¿åº¦ >80% æ—¶ï¼Œå¼ºåˆ¶è¿›å…¥å®‰å…¨æ¨¡å¼ï¼ˆé¢æ¿å¹³æ”¾ä¿æŠ¤èˆµæœºï¼‰ã€‚
- **å®æ—¶åŒæ­¥ä»ªè¡¨ç›˜**: é…åˆ Web UI å®æ—¶æ˜¾ç¤ºé¢æ¿è§’åº¦ä¸å¤©æ°”å»ºè®®ã€‚
- **æŒä¹…åŒ–å­˜å‚¨**: æ‰€æœ‰çš„å†³ç­–é€»è¾‘å‡å¸¦æœ‰æ—¶é—´æˆ³å­˜æ¡£ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚

## ğŸ— ç³»ç»Ÿæ¶æ„ (System Architecture)

1. **åç«¯ (Python)**: å¤„ç†å¤šæºæ•°æ®ï¼ˆGemini AI + Weather API + Firebase Sensorsï¼‰ã€‚
2. **äº‘ç«¯ (Firebase)**: å®æ—¶æŒ‡ä»¤é¢‘é“ (`/control_commands`) + å†å²è®°å½•æ•°æ®åº“ (`/history`)ã€‚
3. **ç¡¬ä»¶ (ESP32)**: å®æ—¶å“åº” AI æŒ‡ä»¤å¹¶å›ä¼ ä¼ æ„Ÿå™¨çŠ¶æ€ã€‚

## ğŸ“Š æ•°æ®åº“ç»“æ„ (Database Schema)

### 1. `/history` (æ–°å¢ï¼šå†å²å½’æ¡£)
| é”®å (Key) | ç±»å‹ (Type) | è¯´æ˜ (Description) |
| :--- | :--- | :--- |
| `timestamp` | String | æ•°æ®è®°å½•çš„å…·ä½“æ—¶é—´ (YYYY-MM-DD HH:MM:SS) |
| `weather` | String | è®°å½•å½“æ—¶çš„å®æ—¶å¤©æ°”æƒ…å†µ |
| `cloud_cover`| Integer | è®°å½•å½“æ—¶çš„äº‘é‡ç™¾åˆ†æ¯” |
| `target_v/h` | Integer | è®°å½• AI å†³ç­–çš„è§’åº¦å¿«ç…§ |
| `is_raining` | Boolean | è®°å½•å½“æ—¶æ˜¯å¦æ­£åœ¨ä¸‹é›¨ |

### 2. `/control_commands` (å®æ—¶æŒ‡ä»¤)
- `mode`: `ai`, `safety` æˆ– `diffuse`
- `target_h`: æ°´å¹³èˆµæœºç›®æ ‡è§’åº¦ (0-180)
- `target_v`: å‚ç›´èˆµæœºç›®æ ‡è§’åº¦ (0-90)

## ğŸ›  å®‰è£…ä¸è¿è¡Œ (Setup)

1. **ä¾èµ–å®‰è£…**:
   ```bash
   pip install python-dotenv google-genai firebase-admin requests
